import { render, waitFor } from '@testing-library/react';
import SportsIcons from '../components/sportsIcons';
import "@testing-library/jest-dom";

global.fetch = jest.fn(() =>
    Promise.resolve({
        json: () =>
            Promise.resolve([
                {
                    sport_id: 0,
                    sport_name: "Test Sport 0",
                    sport_icon: [
                        "M342.84 339.31c46.87-48.73 46.87-125.88 0-174.61l18.15-18.15C379.48 164.17 404.5 175 432 175v-8c-25.29 0-48.31-9.94-65.35-26.11L395.54 112h11.13L432 86.46h-14.46V72L392 97.33v11.13l-28.89 28.89C346.94 120.31 337 97.29 337 72h-8c0 27.5 10.83 52.52 28.46 71.01l-18.15 18.15c-48.73-46.87-125.88-46.87-174.61 0l-18.15-18.15C164.17 124.52 175 99.5 175 72h-8c0 25.29-9.94 48.31-26.11 65.35L112 108.46V97.33L86.46 72v14.46H72L97.33 112h11.13l28.89 28.89C120.31 157.06 97.29 167 72 167v8c27.5 0 52.52-10.83 71.01-28.46l18.15 18.15c-46.87 48.73-46.87 125.88 0 174.61l-18.15 18.15C124.52 339.83 99.5 329 72 329v8c25.29 0 48.31 9.94 65.35 26.11L108.46 392H97.33L72 417.54h14.46V432L112 406.67v-11.13l28.89-28.89C157.06 383.69 167 406.71 167 432h8c0-27.5-10.83-52.52-28.46-71.01l18.15-18.15c48.73 46.87 125.88 46.87 174.61 0l18.15 18.15C339.83 379.48 329 404.5 329 432h8c0-25.29 9.94-48.31 26.11-65.35L392 395.54v11.13L417.54 432v-14.46H432L406.67 392h-11.13l-28.89-28.89C383.69 346.94 406.71 337 432 337v-8c-27.5 0-52.52 10.83-71.01 28.46l-18.15-18.15zm-9.19-172.49-7.07 7.07c-41.7-39.85-107.46-39.85-149.16 0l-7.07-7.07c45.61-43.75 117.69-43.75 163.3 0zm-72.4 94.31 11.5 8.12a27.554 27.554 0 0 1-3.5 3.5l-8.12-11.5c-5.06 4.99-13.2 4.99-18.26 0l-8.12 11.5a27.554 27.554 0 0 1-3.5-3.5l11.5-8.12c-4.99-5.06-4.99-13.2 0-18.26l-11.5-8.13c1.06-1.27 2.23-2.44 3.5-3.5l8.13 11.5c5.06-5 13.2-5 18.26 0l8.12-11.5c1.27 1.06 2.44 2.23 3.5 3.5l-11.5 8.12c4.99 5.07 4.99 13.21-.01 18.27zm7.99-29.91c-9.97-8.29-24.51-8.29-34.48 0l-9.22-9.22c15.09-13.33 37.82-13.33 52.91 0l-9.21 9.22zm-38.02 3.54c-8.29 9.97-8.29 24.51 0 34.48l-9.22 9.22c-13.33-15.09-13.33-37.82 0-52.91l9.22 9.21zm3.54 38.01c9.97 8.29 24.51 8.29 34.48 0l9.22 9.22c-15.09 13.33-37.82 13.33-52.91 0l9.21-9.22zm38.01-3.53c8.29-9.97 8.29-24.51 0-34.48l9.22-9.22c13.33 15.09 13.33 37.82 0 52.91l-9.22-9.21zm-57.14-57.15-9.19-9.19c25.67-23.85 65.46-23.85 91.13 0l-9.19 9.19c-20.59-18.78-52.17-18.78-72.75 0zm-3.54 3.54c-18.78 20.58-18.78 52.16 0 72.74l-9.19 9.19c-23.85-25.67-23.85-65.46 0-91.13l9.19 9.2zm3.54 76.28c20.58 18.78 52.16 18.78 72.74 0l9.19 9.19c-25.67 23.85-65.46 23.85-91.13 0l9.2-9.19zm76.28-3.54c18.78-20.58 18.78-52.16 0-72.74l9.19-9.19c23.85 25.67 23.85 65.46 0 91.13l-9.19-9.2zM196.54 193l-9.19-9.19c36.22-34.38 93.09-34.38 129.31 0l-9.19 9.19c-31.15-29.3-79.79-29.3-110.93 0zm-3.54 3.54c-29.31 31.14-29.31 79.78 0 110.93l-9.19 9.19c-34.38-36.22-34.38-93.09 0-129.31l9.19 9.19zM196.54 311c31.14 29.31 79.78 29.31 110.93 0l9.19 9.19c-36.23 34.38-93.09 34.38-129.31 0l9.19-9.19zM311 307.46c29.31-31.14 29.31-79.78 0-110.93l9.19-9.19c34.38 36.22 34.38 93.09 0 129.31l-9.19-9.19zM166.82 170.35l7.07 7.07c-39.85 41.7-39.85 107.46 0 149.15l-7.07 7.07c-43.75-45.6-43.75-117.68 0-163.29zm3.53 166.83 7.07-7.07c41.7 39.85 107.46 39.85 149.16 0l7.07 7.07c-45.61 43.75-117.69 43.75-163.3 0zm166.83-3.53-7.07-7.07c39.85-41.7 39.85-107.46 0-149.16l7.07-7.07c43.75 45.61 43.75 117.69 0 163.3z"
                    ]
                },
            ]),
    })
) as jest.Mock;

describe('SportsIcons component', () => {
    it('should renders correctly', () => {
        const wrapper = render(<SportsIcons sportId={0} />);
        expect(wrapper).toMatchSnapshot();
    });

    it('should renders sports icons for a given sportId', async () => {
        const { container } = render(<SportsIcons sportId={0} />);
        expect(container).toBeInTheDocument();

        await waitFor(() => {
            const archeryIcons = container.querySelectorAll('path');
            expect(archeryIcons.length).toBe(1);
        });
    });

});
